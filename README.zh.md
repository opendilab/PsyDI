# PsyDI
English | [简体中文(Simplified Chinese)](https://github.com/opendilab/PsyDI/blob/main/README.zh.md)
<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/banner.png"></a>
</div>

## PsyDI 简介

PsyDI 是一款多模态，交互式的心理测评聊天机器人，旨在对用户的多模态输入进行互动分析，从而探索用户的潜在认知模式，最终判定用户的 MBTI（Myers-Briggs Type Indicator）。此外，PsyDI 还为每位用户详细分析的性格分析报告和定制化的生成图。我们正在不断改进 PsyDI，并即将推出如 MBTI 画廊等新功能，期待您的宝贵反馈！

目前可以直接通过[链接](https://psydi.opendilab.org.cn/)访问 PsyDI。

## :boom: 最新消息！

- 我们正在逐步更新经典角色 MBTI 画廊：

| 角色                  | 简介                | MBTI   | 生成图 |
|----------------------------| --------------------------- | ------ | ------ |
| [约尔·福杰（间谍过家家）](http://xhslink.com/13YTRE) | 约尔·福杰是一名身怀绝技，但心地善良的杀手。她伪装成政府官员，机缘巧合下成为了《间谍过家家》中临时家庭不可或缺的一员。 | ISFJ   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/yor.png"></a>     |
| [阿尼亚·福杰（间谍过家家）](http://xhslink.com/Z929fF) | 在《间谍过家家》中，阿尼亚·福杰是一个具有读心能力的小女孩。她发现了黄昏的真实身份，并用读心能力被黄昏收养，组建了临时家庭，在临时家庭的一番秘密活动中扮演了关键角色。 |ENFP       | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/anya.png"></a>      |
| [金克斯（英雄联盟）](http://xhslink.com/Bpt45F) | 金克丝是《英雄联盟》中的一名无政府主义者，也是一名热爱爆炸的神射手。她以混乱的风格和双持枪械在战场上释放冰雹风暴而闻名。 |ESFP     | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/jinx.png"></a>      |
| [维克托（英雄联盟）](http://xhslink.com/4VaTbH) | 维克多是《英雄联盟》中一位才华横溢、毫不留情的发明家，他利用先进的海克斯技术操纵战场，无情地消灭敌人。 | INTJ |  <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/viktor.png"></a>      |
| [菲比·布菲 (老友记)](http://xhslink.com/e6wRII) | 菲比·布菲是《老友记》中一个独具魅力的角色，她以古怪、幽默和非传统的个性著称，拥有一系列独特的生活经历和人生观。菲比曾是一名街头艺人，她创作的歌曲充满了个人特色和幽默感。她与生物学父亲的关系和对动物的热爱，以及她在朋友中的支持和关爱，都为剧集增添了许多欢乐和色彩。她的人生充满了不可预测的转折和奇遇，使她成为六位主角中不可或缺的一员。 | ENFP   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/phoebe.png"></a>      |
| [黄昏 (间谍过家家)](http://xhslink.com/WydWHL) | 在《间谍过家家》中，黄昏是福杰家的一家之主，也在东国从事谍报活动。他为了执行间谍任务而临时组建了家庭，收养了原是孤儿的阿尼亚。随着时间的推移，原本专注于任务的黄昏开始真心在意临时家庭，开始认真思考该如何在任务结束后永远安置她们并隐暪自己是间谍的秘密。 | INTJ   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/loid.png"></a>      |
| [钱德勒 (老友记)](http://xhslink.com/A6N6lM) | 钱德勒·宾（Chandler Bing）是美剧《老友记》中的一个角色。他是罗斯的大学室友，幽默风趣，经常以自嘲的方式逗乐大家。他与莫尼卡发展出一段浪漫关系，并最终结婚。钱德勒以他的机智和幽默感著称，是剧中的搞笑担当。 | ENTP   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/chandler.png"></a>      |
| [安陵容 (甄嬛传)](http://xhslink.com/Q5aN5M) | 在紫禁城内，甄嬛和安陵容曾是亲密无间的朋友。但家族的压力和其他嫔妃的挑拨使安陵容的心态发生了变化，她开始嫉妒甄嬛，渴望通过算计和手段，让自己在皇帝心中的地位超越甄嬛。 | ISFJ   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/anlingrong.PNG"></a>      |
| [皇上&皇后 (甄嬛传)](http://xhslink.com/8yglPN) | 在电视剧《甄嬛传》的设定中，皇上雍正帝和皇后是少年夫妻，在雍正还是雍亲王的时候结缘。但随着时间的推移，他们的关系变得复杂和曲折。 | ISFJ   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/emperor.png"></a>      |
| [祁煜 (恋与深空)](http://xhslink.com/etQHwQ) | 祁煜是《恋与深空》中的男主角之一，出生自海洋文明“利莫里亚”，是一位独树一帜的天才艺术家。虽然有时显得有些倔强和不易接近，但内心深处却有着强烈的责任感和对情感的重视。 | INFP   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/qiyu.png"></a>      |
| [沈星回 (恋与深空)](http://xhslink.com/0l2HwQ) | 沈星回是《恋与深空》中的男主角之一，是现任猎人协会的深空猎人。他展现出非凡的耐心和一种超脱世俗的佛系态度，以一种温柔而平和的方式与世界相处，同时在人际交往中保持着适度的距离。 | ISTP   | <img width="120px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/shenxinghui.png"></a>      | 


## 导航

- [PsyDI 简介](#PsyDI-简介)
- [最新消息](#boom-最新消息！)
- [导航](#导航)
- [快速开始](#star_struck-快速开始)
- [PsyDI 最小流程](#key-psydi-最小流程)
- [介绍](#books-介绍)
  - [评估框架](#评估框架)
  - [测试过程](#测试过程)
  - [迭代更新](#迭代更新)
- [评估](#bar_chart-评估)
- [路线图](#路线图)
- [本地运行](#本地运行)
- [致谢](#致谢)
- [引用](#引用)
- [许可证](#许可证)


## :star_struck: 快速开始

PsyDI 的使用方式很简单！按照以下步骤，您就可以开始自我发现之旅：

:rocket: **在线访问 PsyDI：** 访问我们的[网站](https://psydi.opendilab.org.cn/)直接在线访问 PsyDI。无需下载或安装！

:memo: **开始测试：**
   - 进入测验后，您可以根据提示选择最能代表您的标签，这有助于 PsyDI 根据您的标签来定制后续测试。
   - 接下来，您需要分享您最近喜欢的一首歌，以及您最近的感悟或想法，这些信息便于 PsyDI 围绕您的兴趣展开交流。

<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/init_part.png"></a>
</div>

:bulb: **探索您的个性：**
   - 在探索章节中，PsyDI 将根据您提供的标签，向您提出一系列问题，便于 PsyDI 对您基本了解。

:speech_balloon: **交互式聊天：**
   - PsyDI 将与您交互聊天，深入探讨先前提到的话题。这个互动过程通常包括 12-15 个问题，从多个角度让 PsyDI 发掘您的认知模式。

<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/choose_part.png"></a>
</div>

:sparkles: **详细分析：**
   - 最后，PsyDI 将为您提供一份详细的 MBTI 测试结果与性格分析报告。这份分析报告能够帮助您更好地发掘自己的个性倾向。
   - 此外，PsyDI 还会为您提供一张与您的气质相匹配的生成图，您可以通过生成图对自身性格有视觉上的理解。

以上是使用 PsyDI 的基本方法，现在就开始与 PsyDI 的旅程吧！

## :key: PsyDI 最小流程

我们提供了一个 PsyDI 流程的最小版本作为演示，让每个人都可以轻松地部署 PsyDI。最小流程允许用户输入几条初始文本，基于初始文本生成用户的 MBTI 分数表。然后，PsyDI 最小流程会选择那些最有可能包含深层意义的文本，以此为基础与用户开展多轮对话。对话结束后，PsyDI 会根据对话结果更新用户的 MBTI 分数表。而这一流程正是[介绍](#books-介绍)中所提到的 PsyDI 的核心组件。

在最小流程中，我们以 [DeepSeek](https://www.deepseek.com/) 为例，作为提供多轮对话的语言模型。用户也可以替换为任意其他具有多轮对话能力的语言模型。

## 安装
```shell
pip3 install -r requirements.txt
```

## 使用方法
基于我们[公开的 Score Model](https://huggingface.co/OpenDILabCommunity/PsyDI-RM-v0.1-zh) 运行最小流程：
```shell
REWARD_MODEL_PATH=<rm-path> API_KEY=<your-api-key> API_URL=https://api.deepseek.com MODEL_NAME=deepseek-chat python3 psydi_mini_agent.py
```

基于用于调试的 Score Model 运行最小流程：
```shell
DEBUG=true API_KEY=<your-api-key> API_URL=https://api.deepseek.com MODEL_NAME=deepseek-chat python3 psydi_mini_agent.py
```

## :books: 介绍

<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/psydi_pipeline.png"></a>
</div>
PsyDI 的基本原理是在与用户交流的过程中逐步挖掘用户底层的认知过程。通过发掘这些认知过程，PsyDI 能够识别用户习惯的认知模式，最终确定其迈尔斯-布里格斯类型指标（MBTI）。

### 评估框架

PsyDI 借鉴了传统的心理测试量表，以 MBTI 分数表为核心判断方式。该表的每一行对应了一个 MBTI，其值表示当前用户被认为是该 MBTI 的概率，范围从 0 到 100。

### 测试过程

PsyDI 首先将用户输入的多模态信息转换为文本形式，然后通过微调后的分数模型评估这些文本表达，计算每条文本被判定为某个 MBTI 的概率。在后续测试过程中，PsyDI 将不断迭代以下三个步骤，直到确定用户的 MBTI：

1. **动态选择：**
    PsyDI 根据当前用户的 MBTI 分数表中概率最高的两个 MBTI，选择在这两个 MBTI 下得分都较高的动态。这一步骤的目的是定位当前认知方式最模糊的行为信息，并提出进一步的问题来确认其认知方式。

2. **对话交互：**
    PsyDI 从上一步骤中选出的动态出发，与用户进行多轮对话。多轮对话中有三种交互格式：多选题、迫选题和自由问答。最终多轮对话的问答过程将会整合为一句对用户的描述。

3. **表格更新：**
    PsyDI 根据这一新的描述更新用户的 MBTI 分数表。

### 迭代更新

PsyDI 通过迭代执行上述三个步骤，在每一次交互中不断加深对用户认知模式的理解，直到确认用户的 MBTI。

## :bar_chart:评估

### Score Model 评估
我们构建了 pair-wise 的 MBTI 数据集，并且比较了多个闭源模型和开源模型与 PsyDI 在 MBTI 数据集上的效果。PsyDI 在各个 MBTI 数据集上都展现了超越现有语言模型的效果，结果展示如下：

<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/benchmark.png"></a>
</div>

### Pipeline 评估
我们评估了 PsyDI Pipeline 与现有 MBTI 测试在评测 MBTI bot 时的准确度，结果展现在下图左侧。同时，我们也评估了 PsyDI Pipeline 对于初始动态的依赖程度，发现 PsyDI 在随机的初始动态下都能够在后续对话中确定用户的真实 MBTI，结果展现在下图右侧：

<div align="center">
    <img width="1000px" height="auto" src="https://github.com/opendilab/PsyDI/blob/main/assets/rank_random.png"></a>
</div>

## 路线图
- [x] PsyDI 的在线部署
- [x] 发布所有前端代码和部署脚本
- [x] MBTI 评估画廊
- [ ] 其他语言支持（英语/韩语/日语）
- [x] 发布后端代码示例和提示
- [ ] 发布生成的数据集
- [x] 发布经过训练的奖励模型
- [ ] 技术报告 arxiv 链接
- [ ] 更多多模态和交互式问题和示例

## 本地运行

首先，您需要用 [`.env.example`中定义的](.env.example) 环境变量来运行 PsyDI.

> 注意：您不应提交您的 `.env` 文件，这将会其他人能够获得您的 OpenAI 和身份验证帐户的访问，将导致隐私安全问题。

然后，您需要在您的计算机上安装 node.js（建议使用 v18.17.0）和 npm。

设置好所有环境后，您可以运行以下命令来启动前端：
```bash
npm install -g pnpm
pnpm install
pnpm dev --port 3001
```

此时您的应用模板应该运行在[localhost:3001](http://localhost:3001/)上。

## 致谢

- 感谢 JAAAAACKKKKKY 对于本项目 UI/UX 设计和美术素材的贡献。
- [vercel/ai-chatbot](https://github.com/vercel/ai-chatbot)

## 反馈与贡献

您可以通过如下方式提供反馈：

- 在 Github 上[提交问题](https://github.com/opendilab/PsyDI/issues/new)
- 在 PsyDI 微信群中讨论（添加我们的微信：ding314assist）

  <img src=https://github.com/opendilab/PsyDI/blob/main/assets/wechat.jpeg width=35% />
- 通过邮件与我们联系（opendilab@pjlab.org.cn）

感谢所有对 PsyDI 后续改进的反馈和贡献，包括算法层面和系统设计。这些反馈让 PsyDI 变得更好！

## 引用

```latex
@misc{psydi,
    title={Psydi: A MBTI agent that helps you understand your personality type through a relaxed multi-modal interaction.},
    author={PsyDI Contributors},
    publisher={GitHub},
    howpublished={\url{https://github.com/opendilab/PsyDI}},
    year={2024},
}
```

## 许可证

本仓库中的所有代码都符合 Apache 2.0 许可。
